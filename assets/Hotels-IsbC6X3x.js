import{m as P,q as S,r as h,s as B,c as i,a as e,F as p,h as y,d as r,i as C,g as Y,w as T,b as $,v as E,o as n,t as d,n as H,e as I}from"./index-PsjdFMY_.js";import{e as N,h as m,a as F}from"./events-jYApBxOB.js";const O=N(),V=P("cart",()=>{S();const R=h([]);let A=h(""),D=h(!1);function u(s,c,t){let o={hotelId:s.id,hotelName:s.name};this.saved.push({...o,checkIn:m(c,"YYYY-MM-DD").format("DD-MM-YYYY"),checkOut:m(t,"YYYY-MM-DD").format("DD-MM-YYYY")}),console.log(this.saved)}function M(s){this.saved=this.saved.filter(c=>c.hotelId!=s.id)}let k=B(()=>{let s={},c=[];return R.value.map(t=>{let o=m(t.checkIn,"DD-MM-YYYY"),_=m(t.checkOut,"DD-MM-YYYY");for(;_.subtract(1,"days").diff(o)>0;){console.log(_.toDate());let f=_.format("DD-MM-YYYY");s[f]?s[f].stay.push(t):(s[f]={stay:[t],activity:[]},c.push(f))}}),O.myEvents.map(t=>{var _;let o=m(t.date,"DD/MM/YYYY").format("DD-MM-YYYY");s[o]?(((_=s[o].activity)==null?void 0:_.indexOf(t.description))==-1,s[o].activity.push(t.description)):(s[o]={activity:[t.description]},c.push(o))}),c.sort((t,o)=>m(t,"DD-MM-YYYY").isBefore(m(o,"DD-MM-YYYY"))?-1:1),c.map(t=>({date:t,iternary:s[t]}))});function w(s){this.airesponse=this.airesponse+`<b> You</b>: ${s} <br/><br/>`,this.asking=!0;let c={eventIds:O.myEvents.map(t=>t.id),hotelInfo:this.saved,noOfPerson:1,count:1,message:s};F.post("/api/chat",c).then(t=>{this.airesponse=this.airesponse+"<b> Olive:  </b>"+t.data.response+"<br><br>",this.asking=!1})}return{iternary:k,saved:R,addHotel:u,askAi:w,airesponse:A,asking:D,removeHotel:M}}),L={class:"container"},j={class:"flex lhs"},q={class:"event-box"},z={class:"heading-font heading"},U={class:"flex gap-20"},G=e("b",null,"Match Date:",-1),J={class:"text-xs"},K={class:"date-picker-box flex"},Q=e("label",{for:""},"Check - in",-1),W=["name","value"],X=e("label",{for:""},"Check - Out ",-1),Z=["name","value"],ee={class:"hotel-listing"},te={class:"hotel-card rounded shadow"},se={class:"title heading-font mb-3"},oe=["onClick"],ae={class:"flex justify-between"},ie={class:"text-xs text-olive pb-3"},ne=e("i",{class:"icon map marker"},null,-1),le=e("ul",{class:"ammenities my-2"},[e("li",null,"Free Breakfast"),e("li",null,"Rooftop bar and kitchen"),e("li",null,"Affiliated Actitivies")],-1),ce={key:0},de=e("div",{class:"text-xs"},"Starting from",-1),re={class:"text-2xl text-teal"},ue=["onClick"],he={class:"text-xs"},_e={key:1,class:"tabular p-3"},ve=e("b",null," Type ",-1),pe=e("b",null," Description ",-1),me=e("b",null,"Price",-1),fe={class:"rhs"},be={class:"cart px-4 py-6 rounded shadow"},ye=e("h2",{class:"heading-font text-white text-2xl mb-4"},"My Itinerary Planner",-1),Ye={class:"grid column"},ke={class:"mb-2 bg-beige p-1 rounded text-black"},ge=e("h4",{class:"heading-font text-white mt-3"},"Stay",-1),xe={class:"my-1"},De={key:0,class:"heading-font text-white mt-3"},Me={class:"my-1"},we={key:0,class:"aiscreen"},Re={class:"output p-10",id:"output"},Ae=["innerHTML"],Ce={class:"box bg-olive p-1"},He={key:0,class:"mb-2"},Ie=["disabled"],Oe=["disabled"],Pe={__name:"Hotels",setup(R){const A=S(),D=N(),u=V(),M=D.myEvents;let k=D.get_dates();console.log("inside hotel page"),console.log("getting dates"),console.log(k);let w=h(k.ci),s=h(k.co),c=h([]),t=h(!1),o=h("");h(""),M||A.push({name:"home"});function _(g,v){const a=c.value.indexOf(g.id);a>-1?(c.value.splice(a,1),u.removeHotel(g)):(c.value.push(g.id,v),u.addHotel(g,w.value[v],s.value[v]))}function f(){console.log("asking ai"+o.value),u.askAi(o.value),o.value=""}return(g,v)=>(n(),i("div",L,[e("div",j,[(n(!0),i(p,null,y(r(M),a=>(n(),i("div",q,[e("h2",z,d(a.description),1),e("div",U,[G,e("span",J,d(a.date),1)]),e("div",K,[e("div",null,[Q,e("input",{type:"date",name:"checkin-"+a.id,value:r(w)[a.id]},null,8,W)]),e("div",null,[X,e("input",{type:"date",name:"checkout-"+a.id,value:r(s)[a.id]},null,8,Z)])]),e("div",ee,[(n(!0),i(p,null,y(a.hotels,l=>{var b;return n(),i("div",te,[e("div",se,d(l.name),1),e("button",{class:"save-button",onClick:x=>_(l,a.id)},[e("i",{class:H(["icon bookmark",r(c).indexOf(l.id)>-1?"saved":"empty"])},null,2)],8,oe),e("div",ae,[e("div",null,[e("span",ie,[ne,I("Distance from venue "+d(l.distance)+" mi.",1)]),le]),l.availableRooms.length?(n(),i("div",ce,[de,e("b",re,"$ "+d(l.availableRooms[0].pricePerDay),1)])):Y("",!0)]),l.availableRooms.length?(n(),i("div",{key:0,class:"text-xs text-blue-600 cursor-pointer",onClick:x=>l.showRooms=!l.showRooms},[e("span",he,d((b=l.availableRooms)==null?void 0:b.length),1),I(" Rooms available"),e("i",{class:H(["icon angle",l.showRooms?"up":"down"])},null,2)],8,ue)):Y("",!0),l.showRooms?(n(),i("div",_e,[ve,pe,me,(n(!0),i(p,null,y(l.availableRooms,x=>(n(),i(p,null,[e("span",null,d(x.roomName),1),e("span",null,d(x.roomDesc),1),e("span",null,"$ "+d(x.pricePerDay),1)],64))),256))])):Y("",!0)])}),256))])]))),256))]),e("div",fe,[e("div",be,[ye,(n(!0),i(p,null,y(r(u).iternary,a=>{var l;return n(),i("div",Ye,[e("div",ke,d(a.date),1),ge,(n(!0),i(p,null,y(a.iternary.stay,b=>(n(),i("div",xe,[e("span",null,d(b.hotelName),1)]))),256)),(l=a.iternary.activity)!=null&&l.length?(n(),i("h4",De,"Activity")):Y("",!0),(n(!0),i(p,null,y(a.iternary.activity,b=>(n(),i("div",Me,[e("span",null,d(b),1)]))),256))])}),256)),e("button",{class:"askaibutton",onClick:v[0]||(v[0]=a=>C(t)?t.value=!0:t=!0)},"Help me plan my itinerary")])]),r(t)?(n(),i("div",we,[e("div",Re,[e("p",{innerHTML:r(u).airesponse},null,8,Ae)]),e("div",Ce,[r(u).asking?(n(),i("div",He,"Fetching ..... Please wait")):Y("",!0),e("form",{class:"flex",onSubmit:T(f,["prevent"])},[$(e("input",{class:"askai",type:"text",name:"aimsg","onUpdate:modelValue":v[1]||(v[1]=a=>C(o)?o.value=a:o=a),placeholder:"ask AI to help plan your itinerary",disabled:r(u).asking},null,8,Ie),[[E,r(o)]]),e("button",{class:"bg-popeye text-white",type:"submit",disabled:r(u).asking},"Ask",8,Oe)],32)])])):Y("",!0)]))}};export{Pe as default};
